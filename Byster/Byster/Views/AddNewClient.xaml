<Window
    x:Class="Byster.Views.AddNewClient"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:Byster.Views"
    mc:Ignorable="d"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    Background="Transparent"
    WindowStyle="None"
    Title="AddNewClient"
    Width="340"
    SizeToContent="Height"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="/Views/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Style
                x:Key="SelectableBorderStyle"
                TargetType="Border">
                <Setter
                    Property="Padding"
                    Value="5" />
                <Setter
                    Property="Margin"
                    Value="10" />
                <Setter
                    Property="Background"
                    Value="Transparent" />
                <Setter
                    Property="BorderBrush"
                    Value="Gray" />
                <Setter
                    Property="BorderThickness"
                    Value="1" />
                <Setter
                    Property="HorizontalAlignment"
                    Value="Center" />
                <Setter
                    Property="VerticalAlignment"
                    Value="Center" />

                <Style.Triggers>
                    <DataTrigger
                        Binding="{Binding IsSelected}"
                        Value="True">
                        <Setter
                            Property="Background"
                            Value="#19FFFFFF" />
                    </DataTrigger>
                    <DataTrigger
                        Binding="{Binding IsSelected}"
                        Value="False">
                        <Setter
                            Property="Background"
                            Value="Transparent" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="FocusVisual">
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle Margin="2" StrokeDashArray="1 2" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" SnapsToDevicePixels="true" StrokeThickness="1"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="OptionMarkFocusVisual">
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle Margin="14,0,0,0" StrokeDashArray="1 2" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" SnapsToDevicePixels="true" StrokeThickness="1"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <SolidColorBrush x:Key="RadioButton.Static.Background" Color="#FFFFFFFF"/>
            <SolidColorBrush x:Key="RadioButton.Static.Border" Color="#FF707070"/>
            <SolidColorBrush x:Key="RadioButton.Static.Glyph" Color="#FF212121"/>
            <SolidColorBrush x:Key="RadioButton.MouseOver.Background" Color="#FFF3F9FF"/>
            <SolidColorBrush x:Key="RadioButton.MouseOver.Border" Color="#FF5593FF"/>
            <SolidColorBrush x:Key="RadioButton.MouseOver.Glyph" Color="#FF212121"/>
            <SolidColorBrush x:Key="RadioButton.Pressed.Background" Color="#FFD9ECFF"/>
            <SolidColorBrush x:Key="RadioButton.Pressed.Border" Color="#FF3C77DD"/>
            <SolidColorBrush x:Key="RadioButton.Pressed.Glyph" Color="#FF212121"/>
            <SolidColorBrush x:Key="RadioButton.Disabled.Background" Color="#FFE6E6E6"/>
            <SolidColorBrush x:Key="RadioButton.Disabled.Border" Color="#FFBCBCBC"/>
            <SolidColorBrush x:Key="RadioButton.Disabled.Glyph" Color="#FF707070"/>
            <Style x:Key="RadioButtonStyle" TargetType="{x:Type RadioButton}">
                <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
                <Setter Property="Background" Value="{StaticResource RadioButton.Static.Background}"/>
                <Setter Property="BorderBrush" Value="{StaticResource RadioButton.Static.Border}"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type RadioButton}">
                            <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter x:Name="contentPresenter" Grid.Column="1" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="HasContent" Value="true">
                                    <Setter Property="FocusVisualStyle" Value="{StaticResource OptionMarkFocusVisual}"/>
                                    <Setter Property="Padding" Value="4,-1,0,0"/>
                                </Trigger>  
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

        </ResourceDictionary>
    </Window.Resources>
    <Grid
        Background="{DynamicResource BackgroundWindowColor}">
        <StackPanel>
            <Button
                x:Name="closeButton"
                HorizontalAlignment="Right"
                Style="{StaticResource uibStyle}"
                Height="40"
                Width="40"
                Click="closeButton_Click">
                <Image
                    Source="../Resources/Images/close-button-image.png"
                    Stretch="Uniform"
                    Margin="12" />
            </Button>
            <StackPanel
                Margin="10 0">
                <TextBlock
                    Text="Cервер"
                    Foreground="White"
                    FontFamily="Roboto"
                    HorizontalAlignment="Center"
                    FontSize="18"
                    Margin="0 10" />
                <TextBox
                    Style="{StaticResource tbStyle}"
                    x:Name="serverName"
                    Tag="Название"
                    Margin="5" />
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition
                            Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBox
                        Style="{StaticResource tbStyle}"
                        x:Name="pathToFile"
                        Tag="Путь к файлу"
                        Margin="5"
                        IsReadOnly="True" />

                    <Grid
                        Grid.Column="1"
                        Background="#19FFFFFF"
                        Width="40"
                        Cursor="Hand"
                        Height="37"
                        Margin="3 0 6 0"
                        x:Name="chooseProgramButton"
                        MouseLeftButtonDown="FChooseProgramButton">
                        <Image
                            Source="/Resources/Images/folder.png"
                            Margin="5" />
                    </Grid>
                </Grid>

                <TextBlock
                    Text="Иконка"
                    FontFamily="Roboto"
                    FontSize="16"
                    Foreground="White"
                    HorizontalAlignment="Center"
                    Margin="0 20 0 5"/>

                
                <ItemsControl
                    ItemsSource="{Binding Icons}"
                    SizeChanged="ItemsControl_SizeChanged">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel
                                HorizontalAlignment="Center"
                                VerticalAlignment="Top" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <RadioButton
                                Style="{DynamicResource RadioButtonStyle}"
                                IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                GroupName="ItemSelectionGroup">
                                <Border
                                    Name="border"
                                    CornerRadius="5"
                                    Style="{StaticResource SelectableBorderStyle}">
                                    <StackPanel
                                        VerticalAlignment="Center" Margin="2">
                                        <Image
                                            Source="{Binding Source}"
                                            Width="40"
                                            Height="40" />
                                    </StackPanel>
                                </Border>
                            </RadioButton>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Button
                    Style="{StaticResource bStyle}"
                    Content="Добавить"
                    x:Name="saveBtn"
                    Click="saveBtn_Click"
                    Margin="5 15 5 15"
                    Cursor="Hand" />
                
            </StackPanel>
        </StackPanel>
    </Grid>


</Window>
